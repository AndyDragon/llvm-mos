# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -run-pass=postrapseudos -verify-machineinstrs -o - %s | FileCheck %s
---
name: inc_a
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: inc_a
    ; CHECK: undef %0.subcarry:pc = LDCImm 0
    ; CHECK-NEXT: $a, dead %0.subcarry:pc, dead %0.subv:pc = ADCImm killed $a, 1, %0.subcarry
    $a = INC $a
...
---
name: inc_xy
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: inc_xy
    ; CHECK: $x = IN $x
    ; CHECK-NEXT: $y = IN $y
    $x = INC $x
    $y = INC $y
...
---
name: inc_imag8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: inc_imag8
    ; CHECK: $rc0 = INCImag8 $rc0
    $rc0 = INC $rc0
...
---
name: dec_a
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: dec_a
    ; CHECK: undef %0.subcarry:pc = LDCImm 0
    ; CHECK-NEXT: $a, dead %0.subcarry:pc, dead %0.subv:pc = ADCImm killed $a, 255, %0.subcarry
    $a = DEC $a
...
---
name: dec_xy
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: dec_xy
    ; CHECK: $x = DE $x
    ; CHECK-NEXT: $y = DE $y
    $x = DEC $x
    $y = DEC $y
...
---
name: dec_imag8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: dec_imag8
    ; CHECK: $rc0 = DECImag8 $rc0
    $rc0 = DEC $rc0
...
---
name: cmpnzimm_n
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: cmpnzimm_n
    ; CHECK: $c = CMPImm $a, 42, implicit-def $nz
    ; CHECK-NEXT: $xlsb = SelectImm $n, -1, 0
    $c, $xlsb, $noreg = CMPNZImm $a, 42
...
---
name: cmpnzimm_z
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: cmpnzimm_z
    ; CHECK: $c = CMPImm $a, 42, implicit-def $nz
    ; CHECK-NEXT: $ylsb = SelectImm $z, -1, 0
    $c, $noreg, $ylsb = CMPNZImm $a, 42
...
---
name: cmpnzimag8_n
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: cmpnzimag8_n
    ; CHECK: $c = CMPImag8 $a, $rc2, implicit-def $nz
    ; CHECK-NEXT: $xlsb = SelectImm $n, -1, 0
    $c, $xlsb, $noreg = CMPNZImag8 $a, $rc2
...
---
name: cmpnzimag8_z
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: cmpnzimag8_z
    ; CHECK: $c = CMPImag8 $a, $rc2, implicit-def $nz
    ; CHECK-NEXT: $ylsb = SelectImm $z, -1, 0
    $c, $noreg, $ylsb = CMPNZImag8 $a, $rc2
...
---
name: sbcnzimm_n
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimm_n
    ; CHECK: $a, $c, $v = SBCImm $a, 42, $c, implicit-def $nz
    ; CHECK-NEXT: $xlsb = SelectImm $n, -1, 0
    $a, $c, $xlsb, $v, $noreg = SBCNZImm $a, 42, $c
...
---
name: sbcnzimm_z
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimm_z
    ; CHECK: $a, $c, $v = SBCImm $a, 42, $c, implicit-def $nz
    ; CHECK-NEXT: $ylsb = SelectImm $z, -1, 0
    $a, $c, $noreg, $v, $ylsb = SBCNZImm $a, 42, $c
...
---
name: sbcnzimag8_n
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimag8_n
    ; CHECK: $a, $c, $v = SBCImag8 $a, $rc2, $c, implicit-def $nz
    ; CHECK-NEXT: $xlsb = SelectImm $n, -1, 0
    $a, $c, $xlsb, $v, $noreg = SBCNZImag8 $a, $rc2, $c
...
---
name: sbcnzimag8_z
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimag8_z
    ; CHECK: $a, $c, $v = SBCImag8 $a, $rc2, $c, implicit-def $nz
    ; CHECK-NEXT: $ylsb = SelectImm $z, -1, 0
    $a, $c, $noreg, $v, $ylsb = SBCNZImag8 $a, $rc2, $c
...
---
name: br_c
body: |
  bb.0.entry:
    liveins: $c
    ; CHECK-LABEL: name: br_c
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: BR %bb.0, $c, 1, implicit-def $c
    ; CHECK-NEXT: RTS
    GBR %bb.0.entry, $c, 1, implicit-def $c
    RTS
...
---
name: br_v
body: |
  bb.0.entry:
    liveins: $v
    ; CHECK-LABEL: name: br_v
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: BR %bb.0, $v, 1, implicit-def $c
    ; CHECK-NEXT: RTS
    GBR %bb.0.entry, $v, 1, implicit-def $c
    RTS
...
---
name: br_alsb_0
body: |
  bb.0.entry:
    liveins: $alsb
    ; CHECK-LABEL: name: br_alsb_0
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: dead $c = CMPZTerm $a, implicit-def $nz
    ; CHECK-NEXT: BR %bb.0, $z, 1, implicit-def $c
    ; CHECK-NEXT: RTS
    GBR %bb.0.entry, $alsb, 0, implicit-def $c
    RTS
...
---
name: br_alsb_1
body: |
  bb.0.entry:
    liveins: $alsb
    ; CHECK-LABEL: name: br_alsb_1
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: dead $c = CMPZTerm $a, implicit-def $nz
    ; CHECK-NEXT: BR %bb.0, $z, 0, implicit-def $c
    ; CHECK-NEXT: RTS
    GBR %bb.0.entry, $alsb, 1, implicit-def $c
    RTS
...
---
name: br_xlsb
body: |
  bb.0.entry:
    liveins: $xlsb
    ; CHECK-LABEL: name: br_xlsb
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: dead $c = CMPZTerm $x, implicit-def $nz
    ; CHECK-NEXT: BR %bb.0, $z, 0, implicit-def $c
    ; CHECK-NEXT: RTS
    GBR %bb.0.entry, $xlsb, 1, implicit-def $c
    RTS
...
---
name: br_ylsb
body: |
  bb.0.entry:
    liveins: $ylsb
    ; CHECK-LABEL: name: br_ylsb
    ; CHECK: successors: %bb.0(0x80000000)
    ; CHECK-NEXT: {{  $}}
    ; CHECK-NEXT: dead $c = CMPZTerm $y, implicit-def $nz
    ; CHECK-NEXT: BR %bb.0, $z, 0, implicit-def $c
    ; CHECK-NEXT: RTS
    GBR %bb.0.entry, $ylsb, 1, implicit-def $c
    RTS
...
---
name: ldaidx
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: ldaidx
    ; CHECK: $a = LDAIdx 1234, $x
    $a = LDIdx 1234, $x
...
---
name: ldxidx_y
body: |
  bb.0.entry:
    liveins: $y
    ; CHECK-LABEL: name: ldxidx_y
    ; CHECK: $x = LDXIdx 1234, $y
    $x = LDIdx 1234, $y
...
---
name: ldxidx_x
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: ldxidx_x
    ; CHECK: [[LDAIdx:%[0-9]+]]:ac = LDAIdx 1234, $x
    ; CHECK-NEXT: $x = TA [[LDAIdx]]
    ; CHECK-NEXT: $c = CMPImm $a, 0
    $x = LDIdx 1234, $x
    $c = CMPImm $a, 0
...
---
name: ldyidx_x
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: ldyidx_x
    ; CHECK: $y = LDYIdx 1234, $x
    $y = LDIdx 1234, $x
...
---
name: ldimm1_lsb
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ldimm1_lsb
    ; CHECK: $a = LDImm 1
    $alsb = LDImm1 -1
...
---
name: ldcimm
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ldcimm
    ; CHECK: $c = LDCImm -1
    $c = LDImm1 -1
...
---
name: set_v
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: set_v
    ; CHECK: $v = BITAbs undef $a, &__set_v
    $v = LDImm1 -1
...
---
name: clv
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: clv
    ; CHECK: $v = CLV
    $v = LDImm1 0
...
---
name: ldzimag8
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ldzimag8
    ; CHECK: $rc0 = STZImag8
    $rc0 = LDZ
...
---
name: ldzgpr
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ldzgpr
    ; CHECK: $a = LDImm 0
    $a = LDZ
...
