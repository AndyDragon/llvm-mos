# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -run-pass=postrapseudos -verify-machineinstrs -o - %s | FileCheck %s
---
name: sbcnzimag8
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimag8
    ; CHECK: $a, $c, $v = SBCImag8 $a, $rc2, $c
    $a, $c, $noreg, $v, $noreg = SBCNZImag8 $a, $rc2, $c, implicit-def $nz
...
---
name: sbcnzimag8_n
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimag8_n
    ; CHECK: $a, $c, $v = SBCImag8 $a, $rc2, $c, implicit-def $nz
    ; CHECK: $xlsb = SelectImm $n, 1, 0
    $a, $c, $xlsb, $v, $noreg = SBCNZImag8 $a, $rc2, $c, implicit-def $nz
...
---
name: sbcnzimag8_z
body: |
  bb.0.entry:
    liveins: $rc2, $c
    ; CHECK-LABEL: name: sbcnzimag8_z
    ; CHECK: $a, $c, $v = SBCImag8 $a, $rc2, $c, implicit-def $nz
    ; CHECK: $ylsb = SelectImm $z, 1, 0
    $a, $c, $noreg, $v, $ylsb = SBCNZImag8 $a, $rc2, $c, implicit-def $nz
...
---
name: ldaidx
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: ldaidx
    ; CHECK: $a = LDAIdx 1234, $x
    $a = LDIdx 1234, $x
...
---
name: ldxidx_y
body: |
  bb.0.entry:
    liveins: $y
    ; CHECK-LABEL: name: ldxidx_y
    ; CHECK: $x = LDXIdx 1234, $y
    $x = LDIdx 1234, $y
...
---
name: ldxidx_x
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: ldxidx_x
    ; CHECK: [[LDAIdx:%[0-9]+]]:ac = LDAIdx 1234, $x
    ; CHECK: $x = TA [[LDAIdx]]
    ; CHECK: $c = CMPImm $a, 0
    $x = LDIdx 1234, $x
    $c = CMPImm $a, 0
...
---
name: ldyidx_x
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: ldyidx_x
    ; CHECK: $y = LDYIdx 1234, $x
    $y = LDIdx 1234, $x
...
---
name: ldimm1_lsb
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ldimm1_lsb
    ; CHECK: $a = LDImm 1
    $alsb = LDImm1 1
...
---
name: ldcimm
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: ldcimm
    ; CHECK: $c = LDCImm 1
    $c = LDImm1 1
...
---
name: set_v
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: set_v
    ; CHECK: $v = BITAbs undef $a, &__set_v
    $v = LDImm1 1
...
---
name: clv
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: clv
    ; CHECK: $v = CLV
    $v = LDImm1 0
...
---
name: zext1_from_lsb
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: zext1_from_lsb
    ; CHECK: $a = T_A $x
    $a = ZExt1 $xlsb
...
---
name: zext1_from_flag_to_gpr
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: zext1_from_flag_to_gpr
    ; CHECK: $a = SelectImm $c, 1, 0
    $a = ZExt1 $c
...
---
name: zext1_from_flag_to_nongpr
body: |
  bb.0.entry:
    ; CHECK-LABEL: name: zext1_from_flag_to_nongpr
    ; CHECK: [[SelectImm:%[0-9]+]]:gpr = SelectImm $c, 1, 0
    ; CHECK: $rc2 = COPY [[SelectImm]]
    $rc2 = ZExt1 $c
...
