# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -run-pass=mos-late-opt -verify-machineinstrs -o - %s | FileCheck %s
---
name: cmpimm0_elision
body: |
  bb.0.entry:
    liveins: $x
    ; CHECK-LABEL: name: cmpimm0_elision
    ; CHECK: $a = T_A killed $x, implicit-def $nz
    ; CHECK-NEXT: RTS implicit $n
    $a = T_A killed $x
    dead $c = CMPImm $a, 0, implicit-def $nz
    RTS implicit $n
...
---
name: cmpimm1
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: cmpimm1
    ; CHECK: $a = T_A killed $x
    ; CHECK-NEXT: dead $c = CMPImm $a, 1, implicit-def $nz
    ; CHECK-NEXT: RTS implicit $n
    $a = T_A killed $x
    dead $c = CMPImm $a, 1, implicit-def $nz
    RTS implicit $n
...
---
name: cmpimm0_carry_used
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: cmpimm0_carry_used
    ; CHECK: $a = T_A killed $x
    ; CHECK-NEXT: $c = CMPImm $a, 0, implicit-def $nz
    ; CHECK-NEXT: RTS implicit $n, implicit $c
    $a = T_A killed $x
    $c = CMPImm $a, 0, implicit-def $nz
    RTS implicit $n, implicit $c
...
---
name: cmpimm0_alone
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: cmpimm0_alone
    ; CHECK: dead $c = CMPImm $a, 0, implicit-def $nz
    ; CHECK-NEXT: RTS implicit $n
    dead $c = CMPImm $a, 0, implicit-def $nz
    RTS implicit $n
...
---
name: cmpimm0_clobbered
body: |
  bb.0.entry:
    liveins: $a, $rc2
    ; CHECK-LABEL: name: cmpimm0_clobbered
    ; CHECK: $a = T_A killed $x
    ; CHECK-NEXT: $y = LDImag8 $rc2
    ; CHECK-NEXT: dead $c = CMPImm $a, 0, implicit-def $nz
    ; CHECK-NEXT: RTS implicit $n
    $a = T_A killed $x
    $y = LDImag8 $rc2
    dead $c = CMPImm $a, 0, implicit-def $nz
    RTS implicit $n
...
---
name: cmpimm0_not_clobbered
body: |
  bb.0.entry:
    liveins: $a, $y
    ; CHECK-LABEL: name: cmpimm0_not_clobbered
    ; CHECK: $a = T_A killed $x, implicit-def $nz
    ; CHECK-NEXT: $rc2 = STImag8 $y
    ; CHECK-NEXT: RTS implicit $n
    $a = T_A killed $x
    $rc2 = STImag8 $y
    dead $c = CMPImm $a, 0, implicit-def $nz
    RTS implicit $n
...
