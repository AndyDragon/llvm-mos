# NOTE: Assertions have been autogenerated by utils/update_mir_test_checks.py
# RUN: llc -mtriple=mos -run-pass=mos-insert-copies -verify-machineinstrs -o - %s | FileCheck %s
---
name: asl
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: asl
    ; CHECK: [[COPY:%[0-9]+]]:imag8 = COPY $a
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:aimag8 = COPY [[COPY]]
    ; CHECK-NEXT: %3:aimag8, $c = ASL [[COPY1]]
    ; CHECK-NEXT: [[COPY2:%[0-9]+]]:imag8 = COPY %3
    ; CHECK-NEXT: $a, $c, $v = ADCImag8 $a, [[COPY2]], $c
    ; CHECK-NEXT: RTS implicit [[COPY2]]
    %0:imag8 = COPY $a
    %1:imag8, $c = ASL %0
    $a, $c, $v = ADCImag8 $a, %1, $c
    RTS implicit %1
...
---
name: lsr
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: lsr
    ; CHECK: [[COPY:%[0-9]+]]:imag8 = COPY $a
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:aimag8 = COPY [[COPY]]
    ; CHECK-NEXT: %3:aimag8, $c = LSR [[COPY1]]
    ; CHECK-NEXT: [[COPY2:%[0-9]+]]:imag8 = COPY %3
    ; CHECK-NEXT: $a, $c, $v = ADCImag8 $a, [[COPY2]], $c
    ; CHECK-NEXT: RTS implicit [[COPY2]]
    %0:imag8 = COPY $a
    %1:imag8, $c = LSR %0
    $a, $c, $v = ADCImag8 $a, %1, $c
    RTS implicit %1
...
---
name: rol
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: rol
    ; CHECK: [[COPY:%[0-9]+]]:imag8 = COPY $a
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:aimag8 = COPY [[COPY]]
    ; CHECK-NEXT: %3:aimag8, $c = ROL [[COPY1]], $c
    ; CHECK-NEXT: [[COPY2:%[0-9]+]]:imag8 = COPY %3
    ; CHECK-NEXT: $a, $c, $v = ADCImag8 $a, [[COPY2]], $c
    ; CHECK-NEXT: RTS implicit [[COPY2]]
    %0:imag8 = COPY $a
    %1:imag8, $c = ROL %0, $c
    $a, $c, $v = ADCImag8 $a, %1, $c
    RTS implicit %1
...
---
name: ror
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: ror
    ; CHECK: [[COPY:%[0-9]+]]:imag8 = COPY $a
    ; CHECK-NEXT: [[COPY1:%[0-9]+]]:aimag8 = COPY [[COPY]]
    ; CHECK-NEXT: %3:aimag8, $c = ROR [[COPY1]], $c
    ; CHECK-NEXT: [[COPY2:%[0-9]+]]:imag8 = COPY %3
    ; CHECK-NEXT: $a, $c, $v = ADCImag8 $a, [[COPY2]], $c
    ; CHECK-NEXT: RTS implicit [[COPY2]]
    %0:imag8 = COPY $a
    %1:imag8, $c = ROR %0, $c
    $a, $c, $v = ADCImag8 $a, %1, $c
    RTS implicit %1
...
---
name: unrelated_imag8
body: |
  bb.0.entry:
    liveins: $a
    ; CHECK-LABEL: name: unrelated_imag8
    ; CHECK: [[COPY:%[0-9]+]]:imag8 = COPY $a
    ; CHECK-NEXT: $a, $c, $v = ADCImag8 $a, [[COPY]], $c
    ; CHECK-NEXT: RTS implicit [[COPY]]
    %0:imag8 = COPY $a
    $a, $c, $v = ADCImag8 $a, %0, $c
    RTS implicit %0
...
